/*!
 * jQuery Form Plugin
 * version: 2.96 (16-FEB-2012)
 * @requires jQuery v1.3.2 or later
 *
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Dual licensed under the MIT and GPL licenses:
 *	http://www.opensource.org/licenses/mit-license.php
 *	http://www.gnu.org/licenses/gpl.html
 */
(function(g){g.fn.ajaxSubmit=function(Q){if(!this.length){h("ajaxSubmit: skipping submit process - no element selected");return this}var R,d,O,M=this;if(typeof Q=="function"){Q={success:Q}}R=this.attr("method");d=this.attr("action");O=(typeof d==="string")?g.trim(d):"";O=O||window.location.href||"";if(O){O=(O.match(/^([^#]+)/)||[])[1]}Q=g.extend(true,{url:O,success:g.ajaxSettings.success,type:R||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},Q);var H={};this.trigger("form-pre-serialize",[this,Q,H]);if(H.veto){h("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(Q.beforeSerialize&&Q.beforeSerialize(this,Q)===false){h("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var N=Q.traditional;if(N===undefined){N=g.ajaxSettings.traditional}var a,n,K,G=this.formToArray(Q.semantic);if(Q.data){Q.extraData=Q.data;a=g.param(Q.data,N)}if(Q.beforeSubmit&&Q.beforeSubmit(G,this,Q)===false){h("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[G,this,Q,H]);if(H.veto){h("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var q=g.param(G,N);if(a){q=(q?(q+"&"+a):a)}if(Q.type.toUpperCase()=="GET"){Q.url+=(Q.url.indexOf("?")>=0?"&":"?")+q;Q.data=null}else{Q.data=q}var E=[];if(Q.resetForm){E.push(function(){M.resetForm()})}if(Q.clearForm){E.push(function(){M.clearForm(Q.includeHidden)})}if(!Q.dataType&&Q.target){var P=Q.success||function(){};E.push(function(i){var j=Q.replaceTarget?"replaceWith":"html";g(Q.target)[j](i).each(P,arguments)})}else{if(Q.success){E.push(Q.success)}}Q.success=function(l,k,j){var m=Q.context||Q;for(var i=0,o=E.length;i<o;i++){E[i].apply(m,[l,k,j||M,M])}};var b=g("input:file:enabled[value]",this);var L=b.length>0;var c="multipart/form-data";var v=(M.attr("enctype")==c||M.attr("encoding")==c);var D=!!(L&&b.get(0).files&&window.FormData);h("fileAPI :"+D);var J=(L||v)&&!D;if(Q.iframe!==false&&(Q.iframe||J)){if(Q.closeKeepAlive){g.get(Q.closeKeepAlive,function(){F(G)})}else{F(G)}}else{if((L||v)&&D){Q.progress=Q.progress||g.noop;I(G)}else{g.ajax(Q)}}this.trigger("form-submit-notify",[this,Q]);return this;function I(l){var o=new FormData();for(var m=0;m<l.length;m++){if(l[m].type=="file"){continue}o.append(l[m].name,l[m].value)}M.find("input:file:enabled").each(function(){var s=g(this).attr("name"),p=this.files;if(s){for(var r=0;r<p.length;r++){o.append(s,p[r])}}});if(Q.extraData){for(var i in Q.extraData){o.append(i,Q.extraData[i])}}Q.data=null;var j=g.extend(true,{},g.ajaxSettings,Q,{contentType:false,processData:false,cache:false,type:"POST"});j.data=null;var k=j.beforeSend;j.beforeSend=function(p,r){r.data=o;if(p.upload){p.upload.onprogress=function(s){r.progress(s.position,s.total)}}if(k){k.call(r,p,Q)}};g.ajax(j)}function F(an){var ag=M[0],ah,k,s,i,o,C,y,A,z,m,j,u;var B=!!g.fn.prop;if(an){if(B){for(k=0;k<an.length;k++){ah=g(ag[an[k].name]);ah.prop("disabled",false)}}else{for(k=0;k<an.length;k++){ah=g(ag[an[k].name]);ah.removeAttr("disabled")}}}if(g(":input[name=submit],:input[id=submit]",ag).length){alert('Error: Form elements must not have name or id of "submit".');return}s=g.extend(true,{},g.ajaxSettings,Q);s.context=s.context||s;o="jqFormIO"+(new Date().getTime());if(s.iframeTarget){C=g(s.iframeTarget);m=C.attr("name");if(m==null){C.attr("name",o)}else{o=m}}else{C=g('<iframe name="'+o+'" src="'+s.iframeSrc+'" />');C.css({position:"absolute",top:"-1000px",left:"-1000px"})}y=C[0];A={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(T){var S=(T==="timeout"?"timeout":"aborted");h("aborting upload... "+S);this.aborted=1;C.attr("src",s.iframeSrc);A.error=S;s.error&&s.error.call(s.context,A,S,T);i&&g.event.trigger("ajaxError",[A,s,S]);s.complete&&s.complete.call(s.context,A,S)}};i=s.global;if(i&&!g.active++){g.event.trigger("ajaxStart")}if(i){g.event.trigger("ajaxSend",[A,s])}if(s.beforeSend&&s.beforeSend.call(s.context,A,s)===false){if(s.global){g.active--}return}if(A.aborted){return}z=ag.clk;if(z){m=z.name;if(m&&!z.disabled){s.extraData=s.extraData||{};s.extraData[m]=z.value;if(z.type=="image"){s.extraData[m+".x"]=ag.clk_x;s.extraData[m+".y"]=ag.clk_y}}}var t=1;var x=2;function w(S){var T=S.contentWindow?S.contentWindow.document:S.contentDocument?S.contentDocument:S.document;return T}var ai=g("meta[name=csrf-token]").attr("content");var aj=g("meta[name=csrf-param]").attr("content");if(aj&&ai){s.extraData=s.extraData||{};s.extraData[aj]=ai}function l(){var U=M.attr("target"),W=M.attr("action");ag.setAttribute("target",o);if(!R){ag.setAttribute("method","POST")}if(W!=s.url){ag.setAttribute("action",s.url)}if(!s.skipEncodingOverride&&(!R||/post/i.test(R))){M.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})}if(s.timeout){u=setTimeout(function(){j=true;p(t)},s.timeout)}function T(){try{var Y=w(y).readyState;h("state = "+Y);if(Y.toLowerCase()=="uninitialized"){setTimeout(T,50)}}catch(X){h("Server abort: ",X," (",X.name,")");p(x);u&&clearTimeout(u);u=undefined}}var V=[];try{if(s.extraData){for(var S in s.extraData){V.push(g('<input type="hidden" name="'+S+'">').attr("value",s.extraData[S]).appendTo(ag)[0])}}if(!s.iframeTarget){C.appendTo("body");y.attachEvent?y.attachEvent("onload",p):y.addEventListener("load",p,false)}setTimeout(T,15);ag.submit()}finally{ag.setAttribute("action",W);if(U){ag.setAttribute("target",U)}else{M.removeAttr("target")}g(V).remove()}}if(s.forceSync){l()}else{setTimeout(l,10)}var am,al,ao=50,ae;function p(Y){if(A.aborted||ae){return}try{al=w(y)}catch(V){h("cannot access response document: ",V);Y=x}if(Y===t&&A){A.abort("timeout");return}else{if(Y==x&&A){A.abort("server abort");return}}if(!al||al.location.href==s.iframeSrc){if(!j){return}}y.detachEvent?y.detachEvent("onload",p):y.removeEventListener("load",p,false);var aa="success",W;try{if(j){throw"timeout"}var ab=s.dataType=="xml"||al.XMLDocument||g.isXMLDoc(al);h("isXml="+ab);if(!ab&&window.opera&&(al.body==null||al.body.innerHTML=="")){if(--ao){h("requeing onLoad callback, DOM not available");setTimeout(p,250);return}}var U=al.body?al.body:al.documentElement;A.responseText=U?U.innerHTML:null;A.responseXML=al.XMLDocument?al.XMLDocument:al;if(ab){s.dataType="xml"}A.getResponseHeader=function(ad){var aq={"content-type":s.dataType};return aq[ad]};if(U){A.status=Number(U.getAttribute("status"))||A.status;A.statusText=U.getAttribute("statusText")||A.statusText}var S=(s.dataType||"").toLowerCase();var X=/(json|script|text)/.test(S);if(X||s.textarea){var Z=al.getElementsByTagName("textarea")[0];if(Z){A.responseText=Z.value;A.status=Number(Z.getAttribute("status"))||A.status;A.statusText=Z.getAttribute("statusText")||A.statusText}else{if(X){var ac=al.getElementsByTagName("pre")[0];var T=al.getElementsByTagName("body")[0];if(ac){A.responseText=ac.textContent?ac.textContent:ac.innerText}else{if(T){A.responseText=T.textContent?T.textContent:T.innerText}}}}}else{if(S=="xml"&&!A.responseXML&&A.responseText!=null){A.responseXML=r(A.responseText)}}try{am=ak(A,S,s)}catch(Y){aa="parsererror";A.error=W=(Y||aa)}}catch(Y){h("error caught: ",Y);aa="error";A.error=W=(Y||aa)}if(A.aborted){h("upload aborted");aa=null}if(A.status){aa=(A.status>=200&&A.status<300||A.status===304)?"success":"error"}if(aa==="success"){s.success&&s.success.call(s.context,am,"success",A);i&&g.event.trigger("ajaxSuccess",[A,s])}else{if(aa){if(W==undefined){W=A.statusText}s.error&&s.error.call(s.context,A,aa,W);i&&g.event.trigger("ajaxError",[A,s,W])}}i&&g.event.trigger("ajaxComplete",[A,s]);if(i&&!--g.active){g.event.trigger("ajaxStop")}s.complete&&s.complete.call(s.context,A,aa);ae=true;if(s.timeout){clearTimeout(u)}setTimeout(function(){if(!s.iframeTarget){C.remove()}A.responseXML=null},100)}var r=g.parseXML||function(T,S){if(window.ActiveXObject){S=new ActiveXObject("Microsoft.XMLDOM");S.async="false";S.loadXML(T)}else{S=(new DOMParser()).parseFromString(T,"text/xml")}return(S&&S.documentElement&&S.documentElement.nodeName!="parsererror")?S:null};var af=g.parseJSON||function(S){return window["eval"]("("+S+")")};var ak=function(S,U,V){var W=S.getResponseHeader("content-type")||"",X=U==="xml"||!U&&W.indexOf("xml")>=0,T=X?S.responseXML:S.responseText;if(X&&T.documentElement.nodeName==="parsererror"){g.error&&g.error("parsererror")}if(V&&V.dataFilter){T=V.dataFilter(T,U)}if(typeof T==="string"){if(U==="json"||!U&&W.indexOf("json")>=0){T=af(T)}else{if(U==="script"||!U&&W.indexOf("javascript")>=0){g.globalEval(T)}}}return T}}};g.fn.ajaxForm=function(b){b=b||{};b.delegation=b.delegation&&g.isFunction(g.fn.on);if(!b.delegation&&this.length===0){var a={s:this.selector,c:this.context};if(!g.isReady&&a.s){h("DOM not ready, queuing ajaxForm");g(function(){g(a.s,a.c).ajaxForm(b)});return this}h("terminating; zero elements found by selector"+(g.isReady?"":" (DOM not ready)"));return this}if(b.delegation){g(document).off("submit.form-plugin",this.selector,e).off("click.form-plugin",this.selector,f).on("submit.form-plugin",this.selector,b,e).on("click.form-plugin",this.selector,b,f);return this}return this.ajaxFormUnbind().bind("submit.form-plugin",b,e).bind("click.form-plugin",b,f)};function e(a){var b=a.data;if(!a.isDefaultPrevented()){a.preventDefault();g(this).ajaxSubmit(b)}}function f(b){var c=b.target;var l=g(c);if(!(l.is(":submit,input:image"))){var m=l.closest(":submit");if(m.length==0){return}c=m[0]}var d=this;d.clk=c;if(c.type=="image"){if(b.offsetX!=undefined){d.clk_x=b.offsetX;d.clk_y=b.offsetY}else{if(typeof g.fn.offset=="function"){var a=l.offset();d.clk_x=b.pageX-a.left;d.clk_y=b.pageY-a.top}else{d.clk_x=b.pageX-c.offsetLeft;d.clk_y=b.pageY-c.offsetTop}}}setTimeout(function(){d.clk=d.clk_x=d.clk_y=null},100)}g.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};g.fn.formToArray=function(z){var a=[];if(this.length===0){return a}var w=this[0];var n=z?w.getElementsByTagName("*"):w.elements;if(!n){return a}var i,j,u,y,v,c,x;for(i=0,c=n.length;i<c;i++){v=n[i];u=v.name;if(!u){continue}if(z&&w.clk&&v.type=="image"){if(!v.disabled&&w.clk==v){a.push({name:u,value:g(v).val(),type:v.type});a.push({name:u+".x",value:w.clk_x},{name:u+".y",value:w.clk_y})}continue}y=g.fieldValue(v,true);if(y&&y.constructor==Array){for(j=0,x=y.length;j<x;j++){a.push({name:u,value:y[j]})}}else{if(y!==null&&typeof y!="undefined"){a.push({name:u,value:y,type:v.type})}}}if(!z&&w.clk){var d=g(w.clk),b=d[0];u=b.name;if(u&&!b.disabled&&b.type=="image"){a.push({name:u,value:d.val()});a.push({name:u+".x",value:w.clk_x},{name:u+".y",value:w.clk_y})}}return a};g.fn.formSerialize=function(a){return g.param(this.formToArray(a))};g.fn.fieldSerialize=function(a){var b=[];this.each(function(){var c=this.name;if(!c){return}var i=g.fieldValue(this,a);if(i&&i.constructor==Array){for(var d=0,l=i.length;d<l;d++){b.push({name:c,value:i[d]})}}else{if(i!==null&&typeof i!="undefined"){b.push({name:this.name,value:i})}}});return g.param(b)};g.fn.fieldValue=function(a){for(var b=[],d=0,l=this.length;d<l;d++){var c=this[d];var i=g.fieldValue(c,a);if(i===null||typeof i=="undefined"||(i.constructor==Array&&!i.length)){continue}i.constructor==Array?g.merge(b,i):b.push(i)}return b};g.fieldValue=function(y,n){var w=y.name,a=y.type,z=y.tagName.toLowerCase();if(n===undefined){n=true}if(n&&(!w||y.disabled||a=="reset"||a=="button"||(a=="checkbox"||a=="radio")&&!y.checked||(a=="submit"||a=="image")&&y.form&&y.form.clk!=y||z=="select"&&y.selectedIndex==-1)){return null}if(z=="select"){var i=y.selectedIndex;if(i<0){return null}var c=[],x=y.options;var u=(a=="select-one");var d=(u?i+1:x.length);for(var v=(u?i:0);v<d;v++){var t=x[v];if(t.selected){var b=t.value;if(!b){b=(t.attributes&&t.attributes.value&&!(t.attributes.value.specified))?t.text:t.value}if(u){return b}c.push(b)}}return c}return g(y).val()};g.fn.clearForm=function(a){return this.each(function(){g("input,select,textarea",this).clearFields(a)})};g.fn.clearFields=g.fn.clearInputs=function(b){var a=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var c=this.type,d=this.tagName.toLowerCase();if(a.test(c)||d=="textarea"||(b&&/hidden/.test(c))){this.value=""}else{if(c=="checkbox"||c=="radio"){this.checked=false}else{if(d=="select"){this.selectedIndex=-1}}}})};g.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||(typeof this.reset=="object"&&!this.reset.nodeType)){this.reset()}})};g.fn.enable=function(a){if(a===undefined){a=true}return this.each(function(){this.disabled=!a})};g.fn.selected=function(a){if(a===undefined){a=true}return this.each(function(){var c=this.type;if(c=="checkbox"||c=="radio"){this.checked=a}else{if(this.tagName.toLowerCase()=="option"){var b=g(this).parent("select");if(a&&b[0]&&b[0].type=="select-one"){b.find("option").selected(false)}this.selected=a}}})};g.fn.ajaxSubmit.debug=false;function h(){if(!g.fn.ajaxSubmit.debug){return}var a="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(a)}else{if(window.opera&&window.opera.postError){window.opera.postError(a)}}}})(jQuery);